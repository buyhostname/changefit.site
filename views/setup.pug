extends layout

block content
  .container(style="min-height: 100vh; display: flex; flex-direction: column; justify-content: center; padding-top: 60px; padding-bottom: 60px;")
    div(style="text-align: center; margin-bottom: 48px;")
      h1(style="font-size: 24px; font-weight: 600; margin: 0 0 8px 0;") Setup
      p.text-muted.text-sm Enter at least one API key
    
    if error
      div(style="background: #200; border: 1px solid #400; color: #f66; padding: 12px 16px; border-radius: 5px; margin-bottom: 24px; font-size: 14px; text-align: center;")= error
    
    form(action="/setup" method="POST")
      .card
        div.mb-3
          .flex.items-center.justify-between.mb-1
            label.label(style="margin: 0;") Gemini API Key
            a.text-xs(href="https://aistudio.google.com/app/apikey" target="_blank") Get key →
          .flex.gap-1
            input.input(type="text" name="geminiKey" id="geminiKey" placeholder="AIza..." style="flex: 1;")
            button.btn.btn-secondary(type="button" onclick="pasteKey('geminiKey')" style="padding: 0 12px;") Paste
        
        div
          .flex.items-center.justify-between.mb-1
            label.label(style="margin: 0;") xAI API Key
            a.text-xs(href="https://console.x.ai/team/default/api-keys" target="_blank") Get key →
          .flex.gap-1
            input.input(type="text" name="xaiKey" id="xaiKey" placeholder="xai-..." style="flex: 1;")
            button.btn.btn-secondary(type="button" onclick="pasteKey('xaiKey')" style="padding: 0 12px;") Paste
        
        .divider
        
        button.btn.w-full(type="submit") Continue
    
    div(style="margin-top: 24px; text-align: center;")
      a.text-sm(href="/logout") ← Back to login

block scripts
  script.
    async function pasteKey(id) {
      try {
        const text = await navigator.clipboard.readText();
        document.getElementById(id).value = text.trim();
      } catch (e) {
        alert('Cannot access clipboard');
      }
    }
